(function(){function e(e,n,r){$(e).unbind("click"),$(e).click(function(i){i.preventDefault(),e=$(this).attr("href"),t(e,n,r)})}function t(e,t,r){return $.get(e,function(i){var s=$(t,i);$(".modal").html(s).modal("show"),$(document).ready(function(){n(e,t,r)})},"html"),!1}function n(e,t,n){var u=s("csrftoken");$.ajaxSetup({beforeSend:function(e,t){!o(t.type)&&!this.crossDomain&&e.setRequestHeader("X-CSRFToken",u)}}),i(e,t,n),r(e,t,n)}function r(e,n,i){$(n).submit(function(s){return a(),s.preventDefault(),$.ajax({type:$(this).attr("method"),url:$(this).attr("action"),data:new FormData(this),processData:!1,contentType:!1,success:function(s,o,u){var a=$(n,s);if(a.html())$(".modal").html(a).modal("show"),r(e,n,i);else{var f=!1,l=$(document.activeElement);if(l.length&&$(n).has(l)&&l.is('button[type="submit"], input[type="submit"], input[type="image"]')){var c=l.attr("class").split(/\s+/);$.each(c,function(e,t){t==="addMore"&&(f=!0)})}f==1?t(e,n,i):(document.open(),document.write(s),document.close())}},error:function(e,t,n){}}),!1})}function i(e,n,r){$(r).unbind("click"),$(r).click(function(i){return i.preventDefault(),$.ajax({url:$(this).attr("href"),type:"DELETE",success:function(i,s,o){t(e,n,r)}}),!1})}function s(e){var t=null;if(document.cookie&&document.cookie!=""){var n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=jQuery.trim(n[r]);if(i.substring(0,e.length+1)==e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t}function o(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)}function u(){$(".request-folder-checkbox:checked").length>0?$(".request-folder-actions").show():$(".request-folder-actions").hide()}function a(){code=$("#id_zip_code-autocomplete").val(),$("#id_zip_code option:selected").length==0&&$("#id_zip_code").append("<option value='"+code+"' selected='selected'>"+code+"</option>")}function f(){var e="";for(var t=0;t<32;t++)e+=Math.floor(Math.random()*16).toString(16);return e}function l(){var e=$(".messages .message-list");e.length>0&&e.scrollTop($(".message-list")[0].scrollHeight)}function c(){var e=$("input[type=radio]:checked").val();e=="f"?($("#div_id_first_name").show(),$("#div_id_last_name").show(),$("#div_id_band_name").hide(),$("#div_id_venue_name").hide()):e=="m"?($("#div_id_first_name").hide(),$("#div_id_last_name").hide(),$("#div_id_band_name").show(),$("#div_id_venue_name").hide()):e=="v"&&($("#div_id_first_name").hide(),$("#div_id_last_name").hide(),$("#div_id_band_name").hide(),$("#div_id_venue_name").show())}function h(){e(".editMusicianBiography","#biographyMusicianForm"),e(".editMusicianContact","#contactMusicianForm"),e(".editMusicianMembers","#membersMusicianForm")}function p(){e(".editPolicies","#policiesForm"),e(".editStaff","#staffForm"),e(".editSeating","#seatingForm"),e(".editBiography","#biographyForm"),e(".editContact","#contactForm"),e(".editEquipment","#equipmentForm",".deleteEquipment"),e(".editHours","#hoursForm"),$("#id_form-0-start").datetimepicker({pickDate:!1}),$("#id_form-0-end").datetimepicker({pickDate:!1}),$("#id_form-1-start").datetimepicker({pickDate:!1}),$("#id_form-1-end").datetimepicker({pickDate:!1}),$("#id_form-2-start").datetimepicker({pickDate:!1}),$("#id_form-2-end").datetimepicker({pickDate:!1}),$("#id_form-3-start").datetimepicker({pickDate:!1}),$("#id_form-3-end").datetimepicker({pickDate:!1}),$("#id_form-4-start").datetimepicker({pickDate:!1}),$("#id_form-4-end").datetimepicker({pickDate:!1}),$("#id_form-5-start").datetimepicker({pickDate:!1}),$("#id_form-5-end").datetimepicker({pickDate:!1}),$("#id_form-6-start").datetimepicker({pickDate:!1}),$("#id_form-6-end").datetimepicker({pickDate:!1})}$(document).ready(function(){u(),$(".request-folder-checkbox").click(function(e){u()})}),$(document).ready(function(){$(".expanded-day").hide(),prev=null,$(".expand-day").click(function(e){prev!=null&&prev.is($(this))?$(this).closest(".week").find(".expanded-day").toggle():(prev=$(this),expanded_day=$(".expanded-day").hide(),expanded_day=$(this).closest(".week").find(".expanded-day").show(),events=$(this).find(".events").clone(),links=$(this).find(".links").clone(),event_list=expanded_day.find(".event-list"),event_list.empty(),event_list.append(events),link_list=expanded_day.find(".link-list"),link_list.empty(),link_list.append(links))})}),$(document).ready(function(){if(!$('a[onclick="return showAddAnotherPopup(this);"]').length){var e=function(e){function a(){u.closed?$("#yourlabs_overlay").remove():setTimeout(a,500)}var t=e.attr("id").replace(/^add_/,"");t=r(t),href=e.attr("href"),href.indexOf("?")==-1&&(href+="?"),href+="&winName="+t;var n=500,i=800,s=screen.width/2-i/2,o=screen.height/2-n/2,u=window.open(href,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, copyhistory=no, width="+i+", height="+n+", top="+o+", left="+s);return $("body").append('<div id="yourlabs_overlay"></div'),$("#yourlabs_overlay").click(function(){u.close(),$(this).remove()}),setTimeout(a,1500),u.focus(),!1},t=function(e,t,r){t=n(t),r=n(r);var s=i(e.name),o=document.getElementById(s);if(o){if($(o).is("select")){var u=new Option(r,t);o.options[o.options.length]=u,u.selected=!0}}else alert("Could not get input id for win "+s);e.close()};window.dismissAddAnotherPopup=t;var n=function(e){return e=e.replace(/</g,""),e=e.replace(/"/g,'"'),e=e.replace(/'/g,"'"),e=e.replace(/&/g,"&"),e},r=function(e){return e=e.replace(/\./g,"__dot__"),e=e.replace(/\-/g,"__dash__"),e=e.replace(/\[/g,"__braceleft__"),e=e.replace(/\]/g,"__braceright__"),e},i=function(e){return e=e.replace(/__dot__/g,"."),e=e.replace(/__dash__/g,"-"),e=e.replace(/__braceleft__/g,"["),e=e.replace(/__braceright__/g,"]"),e};$(".autocomplete-add-another").show().click(function(t){t.preventDefault(),e($(this))})}}),window.yourlabs==undefined&&(window.yourlabs={}),window.yourlabs.Autocomplete!=undefined&&console.log("WARNING ! You are loading autocomplete.js **again**."),yourlabs.getInternetExplorerVersion=function(){var e=-1;if(navigator.appName=="Microsoft Internet Explorer"
){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");n.exec(t)!=null&&(e=parseFloat(RegExp.$1))}return e},$.fn.yourlabsRegistry=function(e,t){var n=yourlabs.getInternetExplorerVersion();if(n==-1||n>8)return t===undefined?this.data(e):this.data(e,t);$.fn.yourlabsRegistry.data==undefined&&($.fn.yourlabsRegistry.data={}),$.fn.yourlabsRegistry.guid==undefined&&($.fn.yourlabsRegistry.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})});var r="data-yourlabs-"+e+"-registry-id",i=this.attr(r);return i==undefined&&(i=$.fn.yourlabsRegistry.guid(),this.attr(r,i)),t!=undefined&&($.fn.yourlabsRegistry.data[i]=t),$.fn.yourlabsRegistry.data[i]},yourlabs.Autocomplete=function(e){this.input=e,this.value="",this.minimumCharacters=2,this.hideAfter=500,this.url=!1,this.xhrWait=200,this.choiceSelector=".choice",this.hilightClass="hilight",this.queryVariable="q",this.data={},this.xhr=!1,this.lastData={},this.box=$('<span class="yourlabs-autocomplete"></span>')},yourlabs.Autocomplete.prototype.initialize=function(){this.input.on("blur.autocomplete",$.proxy(this.inputBlur,this)).on("click.autocomplete",$.proxy(this.inputClick,this)).on("keypress.autocomplete",$.proxy(this.inputKeypress,this)).on("keyup.autocomplete",$.proxy(this.inputKeyup,this)).on("keydown.autocomplete",$.proxy(this.inputKeydown,this)),this.box.on("mouseenter",this.choiceSelector,$.proxy(this.boxMouseenter,this)).on("mouseleave",this.choiceSelector,$.proxy(this.boxMouseleave,this)).on("click",this.choiceSelector,$.proxy(this.boxClick,this)),this.data[this.queryVariable]=""},yourlabs.Autocomplete.prototype.destroy=function(e){e.unbind("blur.autocomplete").unbind("click.autocomplete").unbind("keypress.autocomplete").unbind("keyup.autocomplete").unbind("keydown.autocomplete")},yourlabs.Autocomplete.prototype.inputBlur=function(e){window.setTimeout($.proxy(this.hide,this),this.hideAfter)},yourlabs.Autocomplete.prototype.inputClick=function(e){this.value.length>=this.minimumCharacters&&this.show()},yourlabs.Autocomplete.prototype.boxMouseenter=function(e){var t=this.box.find("."+this.hilightClass);this.input.trigger("dehilightChoice",[t,this]),this.input.trigger("hilightChoice",[$(e.currentTarget),this])},yourlabs.Autocomplete.prototype.boxMouseleave=function(e){this.input.trigger("dehilightChoice",[this.box.find("."+this.hilightClass),this])},yourlabs.Autocomplete.prototype.boxClick=function(e){var t=this.box.find("."+this.hilightClass);this.input.trigger("selectChoice",[t,this])},yourlabs.Autocomplete.prototype.getQuery=function(){return this.input.val()},yourlabs.Autocomplete.prototype.inputKeyup=function(e){if(!this.input.is(":visible"))return;switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.box.is(":visible"))return;var t=this.box.find("."+this.hilightClass);if(!t.length)return;e.preventDefault(),e.stopPropagation(),this.input.trigger("selectChoice",[t,this]);break;case 27:if(!this.box.is(":visible"))return;this.hide();break;default:this.refresh()}},yourlabs.Autocomplete.prototype.inputKeydown=function(e){if(!this.input.is(":visible"))return;this.suppressKeyPressRepeat=~$.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},yourlabs.Autocomplete.prototype.inputKeypress=function(e){if(!this.input.is(":visible"))return;if(this.suppressKeyPressRepeat)return;this.move(e)},yourlabs.Autocomplete.prototype.show=function(e){this.fixPosition();var t=$.trim(this.box.find(this.choiceSelector)).length==0;if((this.hasChanged()||t)&&!this.xhr){this.fetch();return}e!=undefined&&this.box.html(e);if(this.box.is(":empty")){this.box.is(":visible")&&this.hide();return}var n=this.box.find("."+this.hilightClass),r=this.box.find(this.choiceSelector+":first");r&&!n.length&&r.addClass(this.hilightClass),this.box.is(":visible")||this.box.css("display","block")},yourlabs.Autocomplete.prototype.hide=function(){this.box.hide()},yourlabs.Autocomplete.prototype.move=function(e){if(this.value.length<this.minimumCharacters)return!0;var t=this.box.find("."+this.hilightClass);$.inArray(e.keyCode,[9,13])>-1&&t.length&&e.preventDefault();if(e.keyCode==38&&!e.shiftKey)var n="up";else{if(e.keyCode!=40)return;var n="down"}var r=this.box.find(this.choiceSelector+":first"),i=this.box.find(this.choiceSelector+":last"),s;this.show(),t.length?(n=="up"?(s=t.prevAll(this.choiceSelector+":first"),s.length||(s=i)):(s=t.nextAll(this.choiceSelector+":first"),s.length||(s=r)),this.input.trigger("dehilightChoice",[t,this])):s=n=="up"?i:r,e.preventDefault(),this.input.trigger("hilightChoice",[s,this])},yourlabs.Autocomplete.prototype.fixPosition=function(){var e=$.extend({},this.input.position(),{height:this.input.outerHeight()});this.input.parents().filter(function(){return $(this).css("overflow")==="hidden"}).first().css("overflow","visible").addClass("autocomplete-light-clearfix"),this.box.insertAfter(this.input).css({top:e.top+e.height,left:e.left})},yourlabs.Autocomplete.prototype.refresh=function(){this.value=this.getQuery(),this.value.length<this.minimumCharacters?this.hide():this.fetch()},yourlabs.Autocomplete.prototype.hasChanged=function(){for(var e in this.data)if(!e in this.lastData||this.data[e]!=this.lastData[e])return!0;return!1},yourlabs.Autocomplete.prototype.fetch=function(){this.data[this.queryVariable]=this.value;if(!this.hasChanged()){this.show();return}this.lastData={};for(var e in this.data)this.lastData[e]=this.data[e];this.xhr&&this.xhr.abort(),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout($.proxy(this.makeXhr,this),this.xhrWait)},yourlabs.Autocomplete.prototype.makeXhr=function(){this.input.addClass("xhr-pending"),this.xhr=$.ajax(this.url,{type:"GET",data:this.data,complete:$.proxy(this.fetchComplete,this)})},yourlabs.Autocomplete.prototype.fetchComplete=function(e,t){this.input.removeClass("xhr-pending"),this.xhr==e&&(this.xhr=!1);if(t=="abort")return;this.show(e.responseText)},$.fn.yourlabsAutocomplete=
function(e){if(this.length<1)return;var e=e?e:{},t=this.yourlabsRegistry("autocomplete");if(e=="destroy"){t&&(t.destroy(this),this.removeData("autocomplete"));return}this.attr("autocomplete","off");if(t==undefined){var t=new yourlabs.Autocomplete(this);for(var n in this.data()){if(!n)continue;if(n.substr(0,12)!="autocomplete"||n=="autocomplete")continue;var r=n.replace("autocomplete",""),r=r.charAt(0).toLowerCase()+r.slice(1);t[r]=this.data(n)}t=$.extend(t,e);if(!t.url){alert("Autocomplete needs a url !");return}this.yourlabsRegistry("autocomplete",t),t.initialize()}return t},$(document).ready(function(){function e(e,t,n){t.removeClass(n.hilightClass)}$(document).bind("hilightChoice",function(e,t,n){t.addClass(n.hilightClass)}),$(document).bind("dehilightChoice",e),$(document).bind("selectChoice",e),$(document).bind("selectChoice",function(e,t,n){n.hide()})}),jQuery.fn.getSelectionStart=function(){if(this.lengh==0)return-1;input=this[0];var e=input.value.length;if(input.createTextRange){if(window.getSelection)var t=window.getSelection();else{var t=document.selection.createRange().duplicate();t.moveEnd("character",input.value.length)}t.text==""&&(e=input.value.length),e=input.value.lastIndexOf(t.text)}else typeof input.selectionStart!="undefined"&&(e=input.selectionStart);return e},jQuery.fn.getCursorPosition=function(){return this.lengh==0?-1:$(this).getSelectionStart()},jQuery.fn.getCursorWord=function(){var e=$(this).val(),t=$(this).getCursorWordPositions();return e.substring(t[0],t[1])},jQuery.fn.getCursorWordPositions=function(){var e=$(this).getCursorPosition(),t=$(this).val(),n="";for(var r=e-1;r>=0;r--)if(t[r]==",")break;r=r<0?0:r;for(var i=e;i<=t.length-1;i++)if(t[i]==",")break;while(t[r]==","||t[r]==" ")r++;while(t[i]==","||t[i]==" ")i--;return[r,i+1]},yourlabs.TextWidget=function(e){this.input=e,this.autocompleteOptions={getQuery:function(){return this.input.getCursorWord()}}},yourlabs.TextWidget.prototype.initializeAutocomplete=function(){this.autocomplete=this.input.yourlabsAutocomplete(this.autocompleteOptions),this.autocomplete.box.addClass("autocomplete-light-text-widget")},yourlabs.TextWidget.prototype.bindSelectChoice=function(){this.input.bind("selectChoice",function(e,t){if(!t.length)return;$(this).yourlabsTextWidget().selectChoice(t)})},yourlabs.TextWidget.prototype.selectChoice=function(e){var t=this.input.val(),n=this.getValue(e),r=this.input.getCursorWordPositions(),i=t.substring(0,r[0]);i+=n,i+=t.substring(r[1]),this.input.val(i),this.input.focus()},yourlabs.TextWidget.prototype.getValue=function(e){return $.trim(e.html().replace(/(<([^>]+)>)/ig,""))},yourlabs.TextWidget.prototype.initialize=function(){this.initializeAutocomplete(),this.bindSelectChoice()},yourlabs.TextWidget.prototype.destroy=function(e){e.unbind("selectChoice").yourlabsAutocomplete("destroy")},$.fn.yourlabsTextWidget=function(e){var e=e?e:{};if(e=="destroy"){var t=this.data("widget");t&&(t.destroy(this),this.removeData("widget"));return}if(this.data("widget")==undefined){var t=new yourlabs.TextWidget(this),n=this.data(),r={autocompleteOptions:{minimumCharacters:0,getQuery:function(){return this.input.getCursorWord()}}};for(var i in n){if(!i)continue;if(i.substr(0,12)=="autocomplete"){if(i=="autocomplete")continue;var s=i.replace("autocomplete","");s=s.replace(s[0],s[0].toLowerCase()),r.autocompleteOptions[s]=n[i]}else r[i]=n[i]}t=$.extend(t,r),t=$.extend(t,e),this.data("widget",t),t.initialize(),t.input.attr("data-widget-ready",1),t.input.trigger("widget-ready")}return this.data("widget")},$(document).ready(function(){$("body").on("initialize","input[data-widget-bootstrap=text]",function(){$(this).yourlabsTextWidget()}),$(document).trigger("yourlabsTextWidgetReady"),$('.autocomplete-light-text-widget:not([id*="__prefix__"])').each(function(){$(this).trigger("initialize")}),$(document).bind("DOMNodeInserted",function(e){var t=$(e.target).find(".autocomplete-light-text-widget");if(!t.length){t=$(e.target).is(".autocomplete-light-text-widget")?$(e.target):!1;if(!t)return}if(t.is(".yourlabs-autocomplete"))return;t.yourlabsWidget("destroy"),t.find("input").yourlabsAutocomplete("destroy"),t.trigger("initialize")})}),window.yourlabs==undefined&&(window.yourlabs={}),$.ajaxSettings.traditional=!0,yourlabs.Widget=function(e){this.widget=e,this.input=this.widget.find("input"),this.select=this.widget.find("select"),this.deck=this.widget.find(".deck"),this.choiceTemplate=this.widget.find(".choice-template .choice"),this.maximumValues=0,this.clearInputOnSelectChoice="1"},yourlabs.Widget.prototype.getValue=function(e){return e.attr("data-value")},yourlabs.Widget.prototype.initializeAutocomplete=function(){this.autocomplete=this.input.yourlabsAutocomplete(),this.autocomplete.box.addClass("autocomplete-light-widget")},yourlabs.Widget.prototype.bindSelectChoice=function(){this.input.bind("selectChoice",function(e,t){if(!t.length)return;var n=$(this).parents(".autocomplete-light-widget").yourlabsWidget();n.selectChoice(t)})},yourlabs.Widget.prototype.selectChoice=function(e){var t=this.getValue(e);if(!t){window.console&&console.log("yourlabs.Widget.getValue failed");return}this.freeDeck(),this.addToDeck(e,t),this.addToSelect(e,t);var n=$(":input:visible").index(this.input);this.resetDisplay();if(this.input.is(":visible"))this.input.focus();else{var r=$(":input:visible:eq("+n+")");r.focus()}this.clearInputOnSelectChoice==="1"&&this.input.val("")},yourlabs.Widget.prototype.freeDeck=function(){var e=this.maximumValues-this.deck.children().length;if(this.maximumValues&&e<1){var t=$(this.deck.children()[0]);this.deselectChoice(t)}},yourlabs.Widget.prototype.resetDisplay=function(){var e=this.select.find("option:selected").length;this.maximumValues&&e==this.maximumValues?this.input.hide():this.input.show(),this.deck.show(),this.autocomplete.box.is(":visible")&&this.autocomplete.fixPosition()},yourlabs.Widget.prototype.deckChoiceHtml=function(e,t){var n=e.clone();return this.addRemove(n),n},yourlabs.Widget.prototype.optionChoice=
function(e){var t=this.choiceTemplate.clone(),n=t.find(".append-option-html");return n.length?n.append(e.html()):t.html(e.html()),t},yourlabs.Widget.prototype.addRemove=function(e){var t=this.widget.find(".remove:last").clone().css("display","inline-block"),n=e.find(".prepend-remove");n.length?n.prepend(t):e.prepend(t)},yourlabs.Widget.prototype.addToDeck=function(e,t){var n=this.deck.find('[data-value="'+t+'"]');if(!n.length){var r=this.deckChoiceHtml(e);r.attr("data-value",t),this.deck.append(r)}},yourlabs.Widget.prototype.addToSelect=function(e,t){var n=this.select.find('option[value="'+t+'"]');n.length||(this.select.append('<option selected="selected" value="'+t+'"></option>'),n=this.select.find('option[value="'+t+'"]')),n.attr("selected","selected"),this.select.trigger("change"),this.updateAutocompleteExclude()},yourlabs.Widget.prototype.deselectChoice=function(e){var t=this.getValue(e);this.select.find('option[value="'+t+'"]').remove(),this.select.trigger("change"),e.remove(),this.deck.children().length==0&&this.deck.hide(),this.updateAutocompleteExclude(),this.resetDisplay()},yourlabs.Widget.prototype.updateAutocompleteExclude=function(){var e=this,t=this.deck.find(this.autocomplete.choiceSelector);this.autocomplete.data.exclude=$.map(t,function(t){return e.getValue($(t))})},yourlabs.Widget.prototype.initialize=function(){this.initializeAutocomplete();var e=this;this.deck.find(this.autocomplete.choiceSelector).each(function(){var t=e.getValue($(this)),n=e.select.find('option[value="'+t+'"]');n.attr("selected")||n.attr("selected",!0)});var t=this.deck.find(this.input.yourlabsAutocomplete().choiceSelector);this.addRemove(t),this.resetDisplay(),this.bindSelectChoice(),this.clearBoth()},yourlabs.Widget.prototype.clearBoth=function(){this.widget.parent().append('<div style="clear: both"></div>')},yourlabs.Widget.prototype.destroy=function(e){e.find("input").unbind("selectChoice").yourlabsAutocomplete("destroy")},$.fn.yourlabsWidget=function(e){var e=e?e:{},t=this.yourlabsRegistry("widget");if(e=="destroy"){t&&(t.destroy(this),this.removeData("widget"));return}if(t==undefined){var t=new yourlabs.Widget(this);for(var n in this.data()){if(!n)continue;if(n.substr(0,6)!="widget"||n=="widget")continue;var r=n.replace("widget",""),r=r.charAt(0).toLowerCase()+r.slice(1);t[r]=this.data(n)}t=$.extend(t,e),$(this).yourlabsRegistry("widget",t),t.initialize(),t.widget.attr("data-widget-ready",1),t.widget.trigger("widget-ready")}return t},$(document).ready(function(){$("body").on("initialize",".autocomplete-light-widget[data-widget-bootstrap=normal]",function(){$(this).yourlabsWidget()}),$("body").on("click",".autocomplete-light-widget .deck .remove",function(){var e=$(this).parents(".autocomplete-light-widget").yourlabsWidget(),t=e.input.yourlabsAutocomplete().choiceSelector,n=$(this).parents(t);e.deselectChoice(n)}),$(document).trigger("yourlabsWidgetReady"),$('.autocomplete-light-widget:not([id*="__prefix__"])').each(function(){$(this).trigger("initialize")}),$(document).bind("DOMNodeInserted",function(e){if($(e.target).is("option")){var t=$(e.target).parents(".autocomplete-light-widget");if(!t.length)return;t=t.yourlabsWidget();var n=$(e.target),r=n.attr("value"),i=t.deck.find('[data-value="'+r+'"]');if(!i.length){var s=t.optionChoice(n);s.attr("data-value",r),t.selectChoice(s)}}else{var o=".autocomplete-light-widget:not([data-widget-ready])",t=$(e.target).find(o);if(!t.length)return;if(t.is(".yourlabs-autocomplete"))return;t.yourlabsWidget("destroy"),t.find("input").yourlabsAutocomplete("destroy"),t.trigger("initialize")}});var e=yourlabs.getInternetExplorerVersion();if(e!=-1&&e<9){observe=[".autocomplete-light-widget:not([data-yourlabs-skip])",".autocomplete-light-widget option:not([data-yourlabs-skip])"].join(),$(observe).attr("data-yourlabs-skip",1);function t(){$(observe).each(function(){$(document).trigger(jQuery.Event("DOMNodeInserted",{target:$(this)})),$(this).attr("data-yourlabs-skip",1)}),setTimeout(t,500)}setTimeout(t,500)}}),function(e){e.fn.anystretch=function(t,n,r){var i=this.selector.length?!1:!0;return this.each(function(s){function y(){if(t||u.length>=1){var n;i||u.css({position:f.elPosition,background:"none"}),a.length==0?a=e("<div />").attr("class","anystretch").css({left:0,top:0,position:i?"fixed":"absolute",overflow:"hidden",zIndex:i?-999999:-999998,margin:0,padding:0,height:"100%",width:"100%"}):a.find("img").addClass("deleteable"),n=e("<img />").css({position:"absolute",display:"none",margin:0,padding:0,border:"none",zIndex:-999999}).bind("load",function(t){var n=e(this),i,s;n.css({width:"auto",height:"auto"}),i=this.width||e(t.target).width(),s=this.height||e(t.target).height(),c=i/s,w(function(){n.fadeIn(f.speed,function(){a.find(".deleteable").remove(),typeof r=="function"&&r()})})}).appendTo(a),u.children(".anystretch").length==0&&(i?e("body").append(a):u.append(a)),a.data("settings",f);var s="";if(t)s=t;else{if(!u.data(f.dataName))return;s=u.data(f.dataName)}n.attr("src",s),e(window).resize(w)}}function w(t){try{g={left:0,top:0},p=E(),v=p/c,v>=S()?(m=(v-S())/2,f.positionY=="center"||f.centeredY?e.extend(g,{top:"-"+m+"px"}):f.positionY=="bottom"&&e.extend(g,{top:"auto",bottom:"0px"})):(v=S(),p=v*c,m=(p-E())/2,f.positionX=="center"||f.centeredX?e.extend(g,{left:"-"+m+"px"}):f.positionX=="right"&&e.extend(g,{left:"auto",right:"0px"})),a.children("img:not(.deleteable)").width(p).height(v).filter("img").css(g)}catch(n){}typeof t=="function"&&t()}function E(){return i?u.width():u.innerWidth()}function S(){return i?u.height():u.innerHeight()}var o={positionX:"center",positionY:"center",speed:0,elPosition:"relative",dataName:"stretch"},u=e(this),a=i?e(".anystretch"):u.children(".anystretch"),f=a.data("settings")||o,l=a.data("settings"),c,h,p,v,m,g;return n&&typeof n=="object"&&e.extend(f,n),n&&typeof n=="function"&&(r=n),e(document).ready(y),this})},e.anystretch=function(t,n,r){var i="onorientationchange"in window?e(document):e(window);i.anystretch(t,n,r)}}(jQuery),$(document
).ready(function(){$("form").submit(function(){if($.data(this,"submitted"))return!1;if(typeof upload_progress_url!="undefined"){var e=1e3,t=f(),n=upload_progress_url,r=200;this.action+=(this.action.indexOf("?")==-1?"?":"&")+"X-Progress-ID="+t;var i=$('<div style="width:'+r+'px;"></div>').appendTo($(this).find(".modal-footer")).append('<div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em;"><span class="progress-info">0%</span></div></div>');i.show();function s(){i.show(),$.getJSON(n,{"X-Progress-ID":t},function(t,n){if(t){var o=parseInt(t.uploaded)/parseInt(t.length);if(o<=1){var u=r*o;i.find(".progress-bar").width(u),i.find(".progress-info").text(""+parseInt(o*100)+"%")}else i.find(".progress-bar").width(r),i.find(".progress-info").text(""+parseInt(100)+"%")}window.setTimeout(s,e)})}window.setTimeout(s,e),$.data(this,"submitted",!0)}})}),$(document).ready(function(){$("#search").yourlabsAutocomplete({url:"/search/",placeholder:"Search",choiceSelector:"a"}).input.bind("selectChoice",function(e,t,n){document.location.href=t.attr("href")})}),$(document).ready(function(){$("#availability-select").popover({html:!0,placement:"bottom",content:function(){return $(".availability-content").html()}}),$("#zipcode-select").popover({html:!0,placement:"bottom",content:function(){return $(".zipcode-content").html()}}),$("html").on("click",function(e){$('[data-toggle="popover"]').each(function(){!$(this).is(e.target)&&$(this).has(e.target).length===0&&$(".popover").has(e.target).length===0&&$(this).popover("hide")})}),$("#availability-select").on("shown.bs.popover",function(){$(function(){$("#id_date").datetimepicker({pickTime:!1})})}),$("#zipcode-select").on("shown.bs.popover",function(){$("#div_id_zip_code").yourlabsWidget({autocompleteOptions:{url:"/autocomplete/ZipcodeAutocomplete/",choiceSelector:"[data-value]",placeholder:""}})}),$(".more-genres").hide(),$("#load-more-genres").click(function(e){e.stopPropagation(),$(".more-genres").show(),$("#load-more-genres").hide()})}),$(document).ready(function(){$(".stretchMe").anystretch();var e=$(".landing-page").find(".section"),t=$(".landing-page").find(".sub-nav"),n=t.outerHeight();$(window).on("scroll",function(){var r=$(this).scrollTop();e.each(function(){var i=$(this).offset().top-n,s=i+$(this).outerHeight();r>=i&&r<=s&&(t.find("li").removeClass("active"),e.removeClass("active"),$(this).addClass("active"),t.find('a[href="#'+$(this).attr("id")+'"]').parent().addClass("active"))})}),t.find("a").on("click",function(){var e=$(this),t=e.attr("href");return $("html, body").animate({scrollTop:$(t).offset().top-n},500),!1})}),$(".messages .reply-form").submit(function(e){var t=$(this).serializeArray(),n=$(this).attr("action");$.ajax({url:n,type:"POST",data:t,success:function(e,t,n){$(".reply-form").removeClass("ajax-form-disabled"),$(".message-list").append(e),$(".reply-form")[0].reset(),l()},error:function(e,t,n){}}),e.preventDefault()}),$(document).ready(function(){function e(){$("#add-poster").hide(),$("#poster-form").show()}$("form").on("submit",function(){a()}),$(function(){$("#id_start_0").datetimepicker({pickTime:!1}),$("#id_start_1").datetimepicker({pickDate:!1}),$("#id_end_0").datetimepicker({pickTime:!1}),$("#id_end_1").datetimepicker({pickDate:!1}),$("#id_accept_by").datetimepicker({pickTime:!1})}),$(document).ready(function(){$("#poster-form").hide(),$("#poster-form").before(function(){return $("<p id='add-poster'><button type='button' class='btn btn-link'><span class='text-muted fa fa-picture-o fa-3x'></span> Attach Photo</button></p>").click(e)})}),l()}),$(document).ready(function(){$(".profile-type").show(),$("#div_id_profile_type").hide();var e="#"+$("input[type=radio]:checked").val();$(e).addClass("active"),$("#f").click(function(){$("button").removeClass("active"),$(this).addClass("active"),$("input[type=radio]").val(["f"]),c()}),$("#m").click(function(){$("button").removeClass("active"),$(this).addClass("active"),$("input[type=radio]").val(["m"]),c()}),$("#v").click(function(){$("button").removeClass("active"),$(this).addClass("active"),$("input[type=radio]").val(["v"]),c()}),$("input[type=radio]").change(c()).change(),$("form").on("submit",function(){a()})}),$(document).ready(function(){h(),p(),$(".modal").on("hidden.bs.modal",function(){window.location.reload(!1)})}),$(document).ajaxStop(function(){h(),p()}),$(document).ready(function(){$("#post-form").hide(),$("#attach-photo-form").hide(),$("#show-post-form").unbind("click"),$("#show-post-form").click(function(){$("#post-form").show(),$("#show-post-form").hide()}),$("#attach-photo").unbind("click"),$("#attach-photo").click(function(){$("#attach-photo-form").toggle()}),$(".help-block").length&&($("#post-form").show(),$("#show-post-form").hide(),$("#attach-photo-form").show())})}).call(this);
