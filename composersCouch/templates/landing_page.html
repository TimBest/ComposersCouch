{% extends 'base.html' %}
{% load static from staticfiles %}
{% load crispy_forms_tags  %}
{% crispy ZipcodeForm ZipcodeForm.helper %}

{% block overwriteHeader %}
  <div class="landing-page white">
    <div class="jumbotron composers-couch">
      <div class="image-frame">
        <span class="frame-helper"></span>
        <img class="image-center" id="logo" alt="Composers Couch" src="{% static 'img/logo.png' %}">
      </div>
      <div class="text-center container">
        <div class="moto">
          <h2>A booking service that connects local venues, artists, and fans.</h2>
        </div>
        {% if not user.is_authenticated %}
          <a href="{% url 'signup' %}?next={% firstof request.path '/' %}" type="button" class="btn btn-lg btn-primary">Sign Up For Free</a>
        {% endif %}
      </div>
    </div>
    <div class="text-center row">
      <h2 class="discover">
        <a href="{% if not user.is_authenticated %}#profile-types{% else %}#requests{% endif %}" class="text-muted">
          <span class="fa fa-chevron-down"></span>
        </a>
      </h2>
    </div>
  </div>
{% endblock %}
{% block overwriteContent %}
  <div class="landing-page">
    {% if not user.is_authenticated %}
      <div class="jumbotron black text-center" id="profile-types">
        <div class="row">
          <div class="col-sm-4">
            <a href="#venues" class="text-white">
              <span class="fa fa-ticket fa-5x"></span>
              <h2>Venues</h2>
              <p>Book better shows by easily comparing artists and managing booking requests.</p>
            </a>
          </div>
          <div class="col-sm-4">
            <a href="#artists" class="text-white">
              <span class="fa fa-music fa-5x"></span>
              <h2>Artists</h2>
              <p>Find local venues, manage your tour, and host your press kit.</p>
            </a>
          </div>
          <div class="col-sm-4">
            <a href="#concerts" class="text-white">
              <span class="fa fa-users fa-5x"></span>
              <h2>Fans</h2>
              <p>Discover local artists, find concerts in your area and follow your favorites.</p>
            </a>
          </div>
        </div>
      </div>
    {% endif %}
    <div class="concerts section" id="concerts">
      <div class="jumbotron stretchMe" data-stretch="{% static 'img/Concert.jpg' %}">
        <div class="main-nav">
          <div class="title">
            <span class="dropdown">
              <a class="btn btn-header dropdown-toggle toggle" data-toggle="dropdown" href="javascript:void(0)" aria-expanded="false">
                {{ feedType | capfirst }}<span class="caret-large text-white"></span>
              </a>
              <ul class="dropdown-menu" role="menu">
                <li class="{% block requestsClass %}{% endblock %}">
                  {% if request.user.profile.profile_type == "m" %}
                    <a href="{% url 'requests' 'expiring' 'band' 'any-distance' zipcode %}?{{ request.GET.urlencode }}">Requests</a>
                  {% else %}
                    <a href="{% url 'requests' 'expiring' 'venue' 'any-distance' zipcode %}?{{ request.GET.urlencode }}">Requests</a>
                  {% endif %}
                </li>
                <li class="{% block showsClass %}{% endblock %}">
                  <a href="{% url 'shows' 'upcoming' 'any-distance' zipcode %}?{{ request.GET.urlencode }}">Shows</a>
                </li>
                <li class="{% block artistsClass %}{% endblock %}">
                  <a href="{% url 'artists' 'all' 'any-distance' zipcode %}?{{ request.GET.urlencode }}">Artists</a>
                </li>
                <li class="{% block venuesClass %}{% endblock %}">
                  <a href="{% url 'venues' 'all' 'any-distance' zipcode %}?{{ request.GET.urlencode }}">Venues</a>
                </li>
                <li class="{% block updatesClass %}{% endblock %}">
                  <a href="{% url 'updates' 'all' 'any-distance' zipcode %}?{{ request.GET.urlencode }}">Updates</a>
                </li>
              </ul>
            </span>
          </div>
          <div class="description">
            {% block forForm %}{% endblock %}
            {% block scope %}
              <span class="dropdown">
                <a class="btn btn-transparent-dropdown dropdown-toggle" href="#" type="button" data-toggle="dropdown" aria-expanded="true">
                  <span class="dotted-bottom text-white">{% block currentScope %}within{% endblock %}</span>
                </a>
                <ul class="dropdown-menu">
                  {% block scopeNav %}
                    <li class="{% block withinClass %}active{% endblock %}">
                      <a href="{% url feedType order 'any-distance' zipcode %}?{{ request.GET.urlencode }}">within</a>
                    </li>
                    <li class="{% block followingClass %}{% endblock %}">
                      <a href="{% url feedType order 'following' zipcode %}?{{ request.GET.urlencode }}">I'm following</a>
                    </li>
                  {% endblock %}
                </ul>
              </span>
            {% endblock %}
            {% block availabilityForm %}{% endblock %}
            {% block zipcodeForm %}
              {% block distance %}
                <span class="dropdown">
                  <a class="btn btn-transparent-dropdown dropdown-toggle" href="#" type="button" data-toggle="dropdown" aria-expanded="true">
                    <span class="dotted-bottom text-white">{{ distance|default:"any distance" }}</span>
                  </a>
                  <ul class="dropdown-menu">
                    {% block within %}
                      <li class="{% ifequal scope '50' %}active{% endifequal %}">
                        <a href="{% url feedType order '50' zipcode %}?{{ request.GET.urlencode }}">50 miles</a>
                      </li>
                      <li class="{% ifequal scope 'any-distance' %}active{% endifequal %}">
                        <a href="{% url feedType order 'any-distance' zipcode %}?{{ request.GET.urlencode }}">any distance</a>
                      </li>
                    {% endblock %}
                  </ul>
                </span>
                <span class="text-white">of</span>
              {% endblock %}
              <a href="#" role="button" data-toggle="popover" id="zipcode-select" class="toggle btn btn-transparent-dropdown" title="Zipcode">
                <span class="dotted-bottom text-white">{% if zipcode %}{{ zipcode }}{% else %}location{% endif %}</span>
              </a>
              <div class="zipcode-content hide">
                <form class="nav-form" role="filter" method="POST" action="{% url 'zipcode' %}">
                  <input type="hidden" name="path" value="{% firstof request.path '/' %}">
                  {% crispy zipcodeForm %}
                </form>
              </div>
            {% endblock %}
          </div>
        </div>
      </div>
    </div>
  </div>

{% endblock %}
