{% extends "threads/base.html" %}


{% block publicClass %}active{% endblock %}
{% block messageType %}Public Requests{% endblock %}

{% block navigation %}
<div class="navigation sub-nav">
  <div class="container-fluid">
    <div class="row no-gutter">
      <div class="col-sm-4 left">
        {% if user.profile.profile_type == 'm' %}
          <a href="{% url 'public_request' %}?next={{ request.get_full_path }}" class="btn btn-primary">Post Public Request</a>
        {% else %}
          <a href="{% url 'public_band_request' %}?next={{ request.get_full_path }}" class="btn btn-primary">Post Public Request</a>
        {% endif %}
      </div>
      <div class="col-sm-4 center">
        <ul class="nav nav-pills nav-centered" role="tablist">
          <li class="{% if is_requests %}active{% endif %}">
            <a href="{% url 'public_requests' %}">Sent</a>
          </li>
          <li class="{% if is_applications %}active{% endif %}">
            <a href="{% url 'public_applications' %}">Applied For</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block content %}
  {% for publicRequest in requests %}
    <div class="publicRequest">
      <div class="panel panel-default">
        {% include "request/_public_request.html" with publicRequest=publicRequest %}
        <div class="panel-footer">
          {% for application in publicRequest.applications.all %}
            {% if forloop.first %}<h4>Applicants:</h4>{% endif %}
            {% include "request/_application.html" with application=application %}
          {% empty %}
            <p>No applicants at this time</p>
          {% endfor %}
        </div>
      </div>
    </div>
  {% empty %}
    <p>No Private Requests</p>
  {% endfor %}
  {% include "utils/_pagination.html" with page=requests %}
{% endblock %}
